syntax = "proto3";

package service.scene;

import "attributes/scene.proto";
import "attributes/combat.proto";

message RequestEnterDefaultScene {
  message Response {
    int32 error_code = 1;
    int64 uid = 2;
    attributes.scene.SceneInfo scene_info = 3;
  }
}

message RequestEnterScene {
  int32 scene_id = 1;
  int32 scene_gid = 2;

  message Response {
    int32 error_code = 1;
    int64 uid = 2;
    attributes.scene.SceneInfo scene_info = 3;
  }
}

message RequestMove {
  int32 direction = 1;
  bool stop_move = 2;
  message Response {
    attributes.scene.SceneInfo scene_info = 1;
    int64 uid = 2;
  }
}

message RequestUpdatePos{
  attributes.scene.Position pos = 1;
  message Response{
    attributes.scene.SceneInfo scene_info = 1;
    int64 uid = 2;
  }
}

message RequestUseSkill {
  int32 skill_id = 1;
  message Response {
    int32 error_code = 1;
    int64 uid = 2;
    int32 skill_id = 3;
    repeated attributes.combat.FightResult result = 4;
  }

  message ResponsePos{
    int32 error_code = 1;
    int64 uid = 2;
    int32 skill_id = 3;
    int64 global_skill_id = 4;
    attributes.scene.Position pos = 5;
  }
}

message RequestGetScenePlayers{
  message Response{
    int32 scene_id = 1;
    int32 scene_gid = 2;
    int32 player_count = 3;
    repeated attributes.scene.PlayerSceneInfo players = 4;
  }
}

message RequestLeaveScene{
  message Response{
    int32 scene_id = 1;
    int32 scene_gid = 2;
    int64 uid = 3;
    string nickname = 4;
  }
}

message RequestFightInfo{
  int64 uid = 1;
  message Response{
    int64 uid = 1;
    attributes.combat.FightInfo fight_info = 2;
  }
}



message ResponseUpdateView{
  int64 uid = 1;
  attributes.scene.SceneInfo scene_info = 2;
  repeated attributes.scene.PlayerSceneInfo leave_players = 3;
  repeated attributes.scene.PlayerSceneInfo enter_players = 4;
}

message ResponseLeaveView{
  int64 uid = 1;
  attributes.scene.SceneInfo scene_info = 2;
}

message ResponseEnterView{
  int64 uid = 1;
  attributes.scene.SceneInfo scene_info = 2;
}